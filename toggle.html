<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>React Form</title>
        <link href="css/bootstrap.css" rel="stylesheet">
        <script src="js/jquery-2.2.4.min.js"></script>
        <script src="js/react.min.js"></script>
        <script src="js/react-dom.min.js"></script>
        <script src="js/react-with-addons.js"></script>
        <script src="js/browser.min.js"></script>

        <style type="text/css">
        

            .liked {
                color: #09f;
            }
            .glyphicon-thumbs-up:hover{
                cursor: pointer;
            }
        </style>
       

    </head>
    <body>
            <div id="App"></div>
            <div id="PBar"></div>
            <div id="SelectBox"></div>
            <div id="Like"></div>
            <h1><span class="glyphicon glyphicon-thumbs-up"></span></h1>

            <script type="text/babel">
                
                var ToggleButton = React.createClass({
                    getInitialState:function(){
                        return{
                            alert:false,
                        }
                    },
                    /*componentDidMount(){
                        setInterval(()=>{
                            this.setState({alert: !this.state.alert})
                        },1000);
                    },*/
                    showWarning:function(){
                        if(!this.state.alert){
                            return null;
                        }
                        return(
                            <div className="alert alert-warning" role="alert">
                                This is Warning Bitch
                            </div>
                        )
                    },
                    handleClick:function(){
                        this.setState({alert: !this.state.alert})
                    },
                    render:function(){
                        return(
                            <div className="container">
                                <div className="row">
                                    <div className="col-md-4 col-md-offset-4">
                                        <h3 className="text-center">This is simple Toggle code in #React</h3>
                                        <button type="button" onClick={this.handleClick} className="btn btn-primary btn-lg btn-block">{this.state.alert?'Hide':'Show'} Warning</button>
                                        {this.showWarning()}
                                    </div>
                                </div>
                                <hr/>
                            </div>
                        )
                    }
                });
                ReactDOM.render(<ToggleButton/>, document.getElementById('App'));

                var ProgressBar = React.createClass({
                    getInitialState:function(){
                        return{
                            width:0,
                            count:0,
                            pause:false,
                        }
                    },
                    componentDidMount(){
                        if(this.state.pause){
                            this.setState({width:this.state.width,
                                            count:this.state.count})
                        }else{
                        setInterval(()=>{
                            this.setState({width:this.state.width+3.8,
                                            count:this.state.count+1})
                        },100);
                        }
                    },

                    handleClick:function(){
                        this.setState({pause: !this.state.pause});
                    },
                    render:function(){
                        if(this.state.width>=380){
                            this.setState({width:0,
                                            count:0});
                        }
                        return(
                            <div className="container">
                                <div className="row">
                                    <div className="col-md-4 col-md-offset-4">
                                        <div className="progress">
                                           <div className="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style={{width:this.state.width}}>
                                           {this.state.count} %
                                           </div>
                                        </div>
                                        <button type="button" onClick={this.handleClick} className="btn btn-primary btn-lg btn-block">{this.state.pause?'Start':'Pause'} Warning</button>
                                    </div>
                                </div>
                                <hr/>
                            </div>       
                        )
                    }
                });
                ReactDOM.render(<ProgressBar/>, document.getElementById('PBar'));

                var Options = React.createClass({
                    getInitialState:function(){
                        return{
                            InputValue:'',
                        }
                    },
                    InitialOption:function(){
                        return(<option value="" selected="selected">Select state first</option>)
                    },

                    FetchData:function(){
                        this.state.InputValue.map(function(text,i){
                                return(<option  key={i} value={text.id}>{text.location_name}</option>);
                                  });
                    },

                    
                    render:function(){
                        this.setState({InputValue: this.props.optionValue});
                        if(this.state.InputValue==''){
                            return this.InitialOption();
                        }else{
                            return this.FetchData();
                        }
                    }
                });

                var FormOptions = React.createClass({
                    getInitialState:function(){
                        return{
                            Istate: [],
                            StateId:'',
                            Idistrict:[],
                            DistrictId:'',
                            Icity:[],
                            District1:'Select state First',
                            City1:'Select District First'

                        }
                            
                        
                    },

                    componentDidMount(){

                       $.ajax({
                            url: "http://localhost/oceangreen/admin/api/readState.php",
                            type : "GET",
                            cache: false,
                            success: function(html)
                                {
                                    //$('.load-content').html(html);
                                    //alert(html);
                                    this.setState({Istate:JSON.parse(html)});
                                    //console.log("length="+this.state.Istate.length);
                                    /*this.setState({ServerResponce: JSON.parse(html)});
                                    console.log("set state is"+this.state.ServerResponce);
                                    console.log("length of array is "+ this.state.ServerResponce.length);
                                    alert(this.state.ServerResponce["Name"]);
                                    alert(this.state.ServerResponce.Mobile);*/
                                    
                                }.bind(this),
                        });

                       
                    },
                    componentWillUnmount: function() {
                        this.serverRequest.abort();
                    },

                    SelectBox:function(){
                        return(
                            <select className="form-control">
                            
                            </select>
                        )
                    },
                    StateSelect:function(e){
                        
                        this.setState({StateId: e.target.value,
                                    District1:'Loading',
                                    Idistrict:[],
                                    Icity:[],
                                    City1:'Select District First'});
                       //alert("Select value is :"+ e.target.value);
                       var dataString = 'id='+ e.target.value;
                       //alert(dataString);
                       $.ajax
                            ({
                            type: "POST",
                            url: "http://localhost/oceangreen/admin/api/readDistrictByState.php",
                            data: dataString,
                            cache: false,
                            success: function(html)
                            {
                                //alert("html is"+html);
                                if(html==''){
                                    this.setState({District1:'No district found'})
                                }else{
                                    this.setState({District1:'Select District'})
                                }
                                this.setState({Idistrict:JSON.parse(html)});
                               // this.setState({Idistrict:JSON.parse(html)});
                            
                            }.bind(this),
                            });
                            //alert("jhkj"+this.state.Idistrict);
                    },
                    DistrictSelect:function(e){
                        //alert("Select value is :"+ e.target.value);
                        this.setState({DistrictId: e.target.value,
                                        City1:'Loading'
                                        });

                        var dataString = 'id='+ e.target.value;

                        $.ajax({
                            type: "POST",
                            url: "http://localhost/oceangreen/admin/api/readCityByDistrict.php",
                            data: dataString,
                            cache: false,
                            success: function(html)
                            {
                                //alert("html is"+html);
                                if(html==''){
                                    this.setState({City1:'No city found'})
                                }else{
                                    this.setState({City1:'Select City'})
                                }
                                this.setState({Icity:JSON.parse(html)});
                               // this.setState({Idistrict:JSON.parse(html)});
                            
                            }.bind(this),

                        });
                    },
                    CitySelect:function(e){
                        alert("State is "+ this.state.StateId + 
                              "District is " +this.state.DistrictId +
                              "City is "+ e.target.value);
                    },
                    
                    
                    
                    render:function(){
                        return(
                            <div className="container">
                                <div className="row">
                                    <div className="col-md-4">
                                    <select onChange={this.StateSelect} className="form-control">
                                    <option  selected="selected" value="">Select State</option>
                                    {
                                        this.state.Istate.map(function(text,i){
                                            return(<option  key={i} value={text.id}>{text.location_name}</option>);
                                    })
                                    }
                                    </select>
                                    </div>
                                    <div className="col-md-4">
                                    <select onChange={this.DistrictSelect} className="form-control">
                                    <option  selected="selected" value="">{this.state.District1}</option>
                                    {
                                    this.state.Idistrict.map(function(text,i){
                                        return(<option  key={i} value={text.id}>{text.location_name}</option>);
                                            }) 
                                    }
                                    </select>
                                    </div>
                                    <div className="col-md-4">
                                    <select onChange={this.CitySelect}className="form-control">
                                    <option  selected="selected" value="">{this.state.City1}</option>
                                    {
                                    this.state.Icity.map(function(text,i){
                                        return(<option  key={i} value={text.id}>{text.location_name}</option>);
                                            }) 
                                    }
                                    </select>
                                    </div>
                                </div>
                                <hr/>
                            </div> 
                        )
                    }
                });
                ReactDOM.render(<FormOptions/>, document.getElementById('SelectBox'));

                var Like = React.createClass({
                    getInitialState:function(){
                        return{Like:false}
                    },
                    handleChange:function(){
                        this.setState({Like: !this.state.Like,})
                        
                    },
                    MouseOver:function(){
                        alert("hello");
                    },
                    render:function(){
                        var ClassName = '';
                        var text = '';
                        if(this.state.Like){
                            ClassName = "glyphicon glyphicon-thumbs-up liked";
                            text = "Liked";
                        }else{
                            ClassName = "glyphicon glyphicon-thumbs-up";
                            text = "Like";
                        }
                        return(
                            <div className="container">
                                <div className="row">
                                    <div className="col-md-4 col-md-offset-4">
                                        <h1>Fb Like Toggle: React</h1>
                                        
                                            <span onMouseOver={this.MouseOver} onClick={this.handleChange} className={ClassName}></span>
                                            {text}
                                           
                                    </div>
                                </div>
                            </div>
                        )
                    }
                });
                ReactDOM.render(<Like/>,document.getElementById('Like'));
            </script>
    </body>
</html>